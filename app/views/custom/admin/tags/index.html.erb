<h2><%= t("admin.tags.index.add_tag") %></h2>
<p><%= t("admin.tags.index.help") %></p>

<%= form_for(@tag, url: admin_tags_path, as: :tag) do |f| %>
  <div class="small-12 medium-6 admin-tags-form">
    <%= f.text_field :name %>
    <%= f.radio_button :kind, "project", label: tag_kind_name('project') %>
    <%= f.radio_button :kind, "category", label: tag_kind_name('category') %>
    <%= f.radio_button :kind, "subcategory", label: tag_kind_name('subcategory') %>

  </div>


  <%= f.submit(t("admin.tags.create"), class: "button success") %>
<% end %>

<hr>
<h3 class="margin"><%= page_entries_info @tags, entry_name: tag_count_label(@tags) %></h3>

<table>
  <thead>
    <th scope="col" class="small-3"><%= t("admin.tags.index.topic") %></th>
    <th scope="col"><%= t("admin.tags.index.scope") %></th>
    <th scope="col" class="small-3"><%= t("admin.tags.index.settings") %></th>
    <th scope="col"><%= t("admin.actions.actions") %></th>
  </thead>
  <tbody>
  <% @tags.each do |tag| %>
    <tr>
        <%= form_for(tag,
            url: admin_tag_path(tag),
            as: :tag,
            html: { id: "edit_tag_#{tag.id}" }) do |f| %>

        <td class='small-3 tag-name-field'>
            <%=f.text_field :name %>
        </td>

        <td>
          <%=tag_kind_name(tag.kind)%>
        </td>

        <td>
          <%if tag.kind == 'category' %>
            <div>
              <%=check_box_tag "tag[category_code][]", 2, (tag.custom_logic_category_code & 2) > 0, id: "category_code_#{tag.id}_2" %>
              <%=label_tag "category_code_#{tag.id}_2" do %>
                <span class="checkbox"><%=t("admin.tags.logic.cloud_category")%></span>
              <%end%>
            </div>
          <%end%>

          <%if tag.kind == 'category' || tag.kind == 'subcategory' %>
            <div>
              <%=check_box_tag "tag[subcategory_code][]", 2, (tag.custom_logic_subcategory_code & 2) > 0, id: "subcategory_code_#{tag.id}_2" %>
              <%=label_tag "subcategory_code_#{tag.id}_2" do %>
                <span class="checkbox"><%=t("admin.tags.logic.cloud_subcategory")%></span>
              <%end%>
            </div>
          <%end%>

          <%if tag.kind == 'category' %>
            <div>
              <%=check_box_tag "tag[category_code][]", 4, (tag.custom_logic_category_code & 4) > 0, id: "category_code_#{tag.id}_4" %>
              <%=label_tag "category_code_#{tag.id}_4" do %>
                <span class="checkbox"><%=t("admin.tags.logic.custom_tags")%></span>
              <%end%>
            </div>
          <%end%>
        </td>

        <td class='small-3' id="tag_<%= tag.id %>">
            <%= f.submit(t("admin.actions.update"), class: "button success") %>
          <%= link_to t("admin.tags.destroy"), admin_tag_path(tag), method: :delete, class: "button hollow alert" %>
        </td>
      <% end %>
    </tr>
  <% end %>
  </tbody>
</table>

<%= paginate @tags %>
